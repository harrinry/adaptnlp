---

title: Question Answering


keywords: fastai
sidebar: home_sidebar

summary: "The Question Answering module within AdaptNLP"
description: "The Question Answering module within AdaptNLP"
nb_path: "nbs/10_question_answering.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/10_question_answering.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="QACallback" class="doc_header"><code>class</code> <code>QACallback</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/question_answering.py#L44" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>QACallback</code>(<strong><code>xmodel_instances</code></strong>, <strong><code>features</code></strong>) :: <code>Callback</code></p>
</blockquote>
<p>Basic Question Answering Data Callback</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="TransformersQuestionAnswering" class="doc_header"><code>class</code> <code>TransformersQuestionAnswering</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/question_answering.py#L100" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>TransformersQuestionAnswering</code>(<strong><code>tokenizer</code></strong>:<code>PreTrainedTokenizer</code>, <strong><code>model</code></strong>:<code>PreTrainedModel</code>) :: <a href="/adaptnlp/model.html#AdaptiveModel"><code>AdaptiveModel</code></a></p>
</blockquote>
<p>Adaptive Model for Transformers Question Answering Model</p>
<p><strong>Parameters</strong></p>
<ul>
<li><strong>tokenizer</strong> - A tokenizer object from Huggingface's transformers (TODO)and tokenizers *</li>
<li><strong>model</strong> - A transformer Question Answering model</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="EasyQuestionAnswering" class="doc_header"><code>class</code> <code>EasyQuestionAnswering</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/question_answering.py#L272" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>EasyQuestionAnswering</code>()</p>
</blockquote>
<p>Question Answering Module</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">qa</span> <span class="o">=</span> <span class="n">adaptnlp</span><span class="o">.</span><span class="n">EasyQuestionAnswering</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">qa</span><span class="o">.</span><span class="n">predict_qa</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s1">&#39;What is life?&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;Life is NLP.&#39;</span><span class="p">,</span> <span class="n">n_best_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">mini_batch_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
<p><strong>Usage Examples:</strong></p>
<details class="description">
<summary data-open="Hide Examples" data-close="Show Examples"></summary>
<summary></summary>
<b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/10_question_answering.ipynb>Source</a></b>

<code>
#hide
qa_model = EasyQuestionAnswering()
text = """Amazon.com, Inc.[6] (/ˈæməzɒn/), is an American multinational technology company based in Seattle, 
Washington that focuses on e-commerce, cloud computing, digital streaming, and artificial intelligence. 
It is considered one of the Big Four technology companies along with Google, Apple, and Facebook.[7][8][9] 
Amazon is known for its disruption of well-established industries through technological innovation and mass 
scale.[10][11][12] It is the world's largest e-commerce marketplace, AI assistant provider, and cloud computing 
platform[13] as measured by revenue and market capitalization.[14] Amazon is the largest Internet company by 
revenue in the world.[15] It is the second largest private employer in the United States[16] and one of the world's 
most valuable companies. Amazon is the second largest technology company by revenue. Amazon was founded by Jeff Bezos 
on July 5, 1994, in Bellevue, Washington. The company initially started as an online marketplace for books but later 
expanded to sell electronics, software, video games, apparel, furniture, food, toys, and jewelry. In 2015, Amazon 
surpassed Walmart as the most valuable retailer in the United States by market capitalization.[17] In 2017, Amazon 
acquired Whole Foods Market for $13.4 billion, which vastly increased Amazon's presence as a brick-and-mortar 
retailer.[18] In 2018, Bezos announced that its two-day delivery service, Amazon Prime, had surpassed 100 million 
subscribers worldwide
"""

top_prediction, all_nbest_json = qa_model.predict_qa(query="What does Amazon do?", context=text, n_best_size=10, mini_batch_size=1, model_name_or_path="distilbert-base-uncased-distilled-squad")
test_eq(top_prediction, 'disruption of well-established industries')
#hide
from adaptnlp.model_hub import HFModelHub
hub = HFModelHub()
models = hub.search_model_by_task('question-answering')
model = models[-1]
top_prediction, all_nbest_json = qa_model.predict_qa(query="What does Amazon do?", context=text, n_best_size=10, mini_batch_size=1, model_name_or_path=model)
test_eq(top_prediction, 'disruption of well-established industries')
</code>
</details>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

