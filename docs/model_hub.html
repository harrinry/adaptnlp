---

title: Interacting with HuggingFace and Flair, Model Zoo


keywords: fastai
sidebar: home_sidebar

summary: "An interactive API for model lookup within HuggingFace and Flair"
description: "An interactive API for model lookup within HuggingFace and Flair"
nb_path: "nbs/02_model_hub.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_model_hub.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>{% include note.html content='For right now this is only available in the dev build of adaptnlp, which you can install with <code>pip install git+https://github.com/novetta/adaptnlp</code>' %}</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tasks">Tasks<a class="anchor-link" href="#Tasks"> </a></h2><p><code>HF_TASKS</code> and <code>FLAIR_TASKS</code> are namespace objects that can enable tab-completion when searching for specific tasks within the <a href="/adaptnlpmodel_hub.html#HFModelHub"><code>HFModelHub</code></a> and <a href="/adaptnlpmodel_hub.html#FlairModelHub"><code>FlairModelHub</code></a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="HF_TASKS" class="doc_header"><code>class</code> <code>HF_TASKS</code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>HF_TASKS</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>A list of all HuggingFace tasks for valid API lookup as attribtues to get tab-completion and typo-proofing</p>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#export</span>
<span class="n">mk_class</span><span class="p">(</span><span class="s1">&#39;HF_TASKS&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">_hf_tasks</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;A list of all HuggingFace tasks for valid API lookup as attribtues to get tab-completion and typo-proofing&quot;</span><span class="p">)</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#export</span>
<span class="n">_all_</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;HF_TASKS&#39;</span><span class="p">]</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Possible tasks:
* fill-mask
* question-answering
* summarization
* table-question-answering
* text-classification
* text-generation
* text2text-generation
* token-classification
* translation
* zero-shot-classification
* conversational
* text-to-speech
* automatic-speech-recognition
* audio-source-seperation
* voice-activity-detection
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="FLAIR_TASKS" class="doc_header"><code>class</code> <code>FLAIR_TASKS</code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>FLAIR_TASKS</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>A list of all Flair tasks for valid API lookup as attribtues to get tab-completion and typo-proofing</p>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#export</span>
<span class="n">mk_class</span><span class="p">(</span><span class="s1">&#39;FLAIR_TASKS&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">_flair_tasks</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;A list of all Flair tasks for valid API lookup as attribtues to get tab-completion and typo-proofing&quot;</span><span class="p">)</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#export</span>
<span class="n">_all_</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FLAIR_TASKS&#39;</span><span class="p">]</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Possible tasks:
* ner
* chunk
* frame
* pos
* upos
* embeddings
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="HFModelResult" class="doc_header"><code>class</code> <code>HFModelResult</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L58" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>HFModelResult</code>(<strong><code>model_info</code></strong>:<code>ModelInfo</code>)</p>
</blockquote>
<p>A very basic class for storing a HuggingFace model returned through an API request</p>
<p>They have 4 properties:</p>
<ul>
<li><code>name</code>: The <code>modelId</code> from the <code>modelInfo</code>. This also includes the model author's name, such as "IlyaGusev/mbart_ru_sum_gazeta"</li>
<li><code>tags</code>: Any tags that were included in <code>HugginFace</code> in relation to the model.</li>
<li><code>tasks</code>: These are the tasks dictated for the model.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We look inside of <code>modelInfo.pipeline_tag</code> as well as the <code>tags</code> for if there is any overlap</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="HFModelResult.to_dict" class="doc_header"><code>HFModelResult.to_dict</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L89" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>HFModelResult.to_dict</code>()</p>
</blockquote>
<p>Returns <a href="/adaptnlpmodel_hub.html#HFModelResult"><code>HFModelResult</code></a> as a dictionary with the keys:</p>
<ul>
<li><code>model_name</code></li>
<li><code>tags</code></li>
<li><code>tasks</code></li>
<li><code>model_info</code></li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="HFModelHub" class="doc_header"><code>class</code> <code>HFModelHub</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L100" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>HFModelHub</code>(<strong><code>username</code></strong>=<em><code>None</code></em>, <strong><code>password</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>A class for interacting with the HF model hub API, and searching for models by name or task</p>
<p>Can optionally include your HuggingFace login for authorized access (but is not required)</p>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/04_embeddings.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#export</span>
<span class="n">_flair_hub</span> <span class="o">=</span> <span class="n">FlairModelHub</span><span class="p">()</span>
<span class="n">_hf_hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/06_sequence_classification.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s2">&quot;nlptown/bert-base&quot;</span><span class="p">,</span> <span class="n">user_uploaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">classifier</span> <span class="o">=</span> <span class="n">EasySequenceClassifier</span><span class="p">()</span>
<span class="n">sentences</span> <span class="o">=</span> <span class="n">classifier</span><span class="o">.</span><span class="n">tag_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">example_text</span><span class="p">,</span> 
                               <span class="n">model_name_or_path</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
                               <span class="n">mini_batch_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">pred</span><span class="p">,</span> <span class="n">truth</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">preds</span><span class="p">,</span> <span class="n">truth_lbls</span><span class="p">):</span>
    <span class="n">test_eq</span><span class="p">(</span><span class="n">pred</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">truth</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">test_close</span><span class="p">(</span><span class="n">pred</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">truth</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="mf">1e-4</span><span class="p">)</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/08_translation.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s2">&quot;translation&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">translations</span> <span class="o">=</span> <span class="n">translator</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">,</span> <span class="n">t5_prefix</span><span class="o">=</span><span class="s2">&quot;translate English to German&quot;</span><span class="p">,</span> <span class="n">model_name_or_path</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">mini_batch_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">early_stopping</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">translations</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Das Maschinenlernen wird die Welt in Kürze übernehmen.&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Maschinen können in vielen Sprachen sprechen.&#39;</span><span class="p">])</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The model search hub creates a friendly end-user API when searching through HuggingFace (and Flair, as we will see later). Usage is extremely simple as well.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="HFModelHub.search_model_by_task" class="doc_header"><code>HFModelHub.search_model_by_task</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L126" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>HFModelHub.search_model_by_task</code>(<strong><code>task</code></strong>:<code>str</code>, <strong><code>as_dict</code></strong>=<em><code>False</code></em>, <strong><code>user_uploaded</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Searches HuggingFace Model API for all pretrained models relating to <code>task</code> and returns a list of HFModelResults</p>
<p>Optionally can return all models as a <code>dict</code> rather than a list</p>
<p>If <code>user_uploaded</code> is False, will only return models originating in HuggingFace (such as distilgpt2)</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHubSearch</span><span class="p">()</span>
    <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;summarization&#39;</span><span class="p">)</span>
    <span class="c1"># OR #</span>
    <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="n">HF_TASKS</span><span class="o">.</span><span class="n">SUMMARIZATION</span><span class="p">)</span>
</pre></div>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;summarization&#39;</span><span class="p">,</span> <span class="n">user_uploaded</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">as_dict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">models</span>
<span class="c1">#hide</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;summarization&#39;</span><span class="p">,</span> <span class="n">user_uploaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">models</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/09a_tutorial.easy_text_generator.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;text-generation&#39;</span><span class="p">);</span> <span class="n">models</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/08_translation.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s2">&quot;translation&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">translations</span> <span class="o">=</span> <span class="n">translator</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">,</span> <span class="n">t5_prefix</span><span class="o">=</span><span class="s2">&quot;translate English to German&quot;</span><span class="p">,</span> <span class="n">model_name_or_path</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">mini_batch_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">early_stopping</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">translations</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Das Maschinenlernen wird die Welt in Kürze übernehmen.&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Maschinen können in vielen Sprachen sprechen.&#39;</span><span class="p">])</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>More in depth examples are below:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are also cases where a <code>dict</code> may be easier to work with (perhaps utilizing a network API, or ease of use for some). We can instead return a dictionary of <a href="/adaptnlpmodel_hub.html#HFModelResult"><code>HFModelResult</code></a> objects too by passing <code>as_dict=True</code> to any search call:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">models</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;summarization&#39;</span><span class="p">,</span> <span class="n">as_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span>
<span class="n">models</span><span class="p">[</span><span class="s1">&#39;t5-11b&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;model_name&#39;: &#39;t5-11b&#39;,
 &#39;tags&#39;: [&#39;pytorch&#39;,
  &#39;tf&#39;,
  &#39;t5&#39;,
  &#39;lm-head&#39;,
  &#39;seq2seq&#39;,
  &#39;en&#39;,
  &#39;fr&#39;,
  &#39;ro&#39;,
  &#39;de&#39;,
  &#39;dataset:c4&#39;,
  &#39;arxiv:1910.10683&#39;,
  &#39;transformers&#39;,
  &#39;summarization&#39;,
  &#39;translation&#39;,
  &#39;license:apache-2.0&#39;,
  &#39;text2text-generation&#39;],
 &#39;tasks&#39;: [&#39;summarization&#39;, &#39;text2text-generation&#39;, &#39;translation&#39;],
 &#39;model_info&#39;: &lt;huggingface_hub.hf_api.ModelInfo at 0x7fc1f2c7dca0&gt;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This will return a dictionary of the name, the HuggingFace tags affiliated with the model, the dictated tasks, and an instance of <code>huggingface_hub</code>'s <code>ModelInfo</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="HFModelHub.search_model_by_name" class="doc_header"><code>HFModelHub.search_model_by_name</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L150" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>HFModelHub.search_model_by_name</code>(<strong><code>name</code></strong>:<code>str</code>, <strong><code>as_dict</code></strong>=<em><code>False</code></em>, <strong><code>user_uploaded</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Searches HuggingFace Model API for all pretrained models containing <code>name</code> and returns a list of HFModelResults</p>
<p>Optionally can return all models as <code>dict</code> rather than a list</p>
<p>If <code>user_uploaded</code> is False, will only return models originating from HuggingFace (such as distilgpt2)</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHubSearch</span><span class="p">()</span>
  <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;gpt2&#39;</span><span class="p">)</span>
</pre></div>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/05a_tutorial.token_tagging.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;sshleifer/tiny-dbmdz-bert&#39;</span><span class="p">,</span> <span class="n">user_uploaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span> <span class="n">model</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/04a_tutorial.embeddings.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;gpt2&#39;</span><span class="p">);</span> <span class="n">models</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/06_sequence_classification.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="n">hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s2">&quot;nlptown/bert-base&quot;</span><span class="p">,</span> <span class="n">user_uploaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">classifier</span> <span class="o">=</span> <span class="n">EasySequenceClassifier</span><span class="p">()</span>
<span class="n">sentences</span> <span class="o">=</span> <span class="n">classifier</span><span class="o">.</span><span class="n">tag_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">example_text</span><span class="p">,</span> 
                               <span class="n">model_name_or_path</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
                               <span class="n">mini_batch_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">pred</span><span class="p">,</span> <span class="n">truth</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">preds</span><span class="p">,</span> <span class="n">truth_lbls</span><span class="p">):</span>
    <span class="n">test_eq</span><span class="p">(</span><span class="n">pred</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">truth</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">test_close</span><span class="p">(</span><span class="n">pred</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">truth</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="mf">1e-4</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With <code>search_model_by_name</code> you're allowed a bit more freedom in what you wish to search for. <code>search_model_by_name</code> downloads the entire list of models from <code>HuggingFace</code> then performs partial string matching. As a result you can search for all models by a particular user by doing:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;Callidior&#39;</span><span class="p">,</span> <span class="n">user_uploaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[Model Name: Callidior/bert2bert-base-arxiv-titlegen, Tasks: [summarization]]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or (as implied by the function name) any model type itself:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;gpt2&#39;</span><span class="p">,</span> <span class="n">user_uploaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">5</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[Model Name: 850886470/xxy_gpt2_chinese, Tasks: [],
 Model Name: AlekseyKorshuk/gpt2-wikitext2, Tasks: [],
 Model Name: ComCom-Dev/gpt2-bible-test, Tasks: [],
 Model Name: DHBaek/gpt2-stackoverflow-question-contents-generator, Tasks: [text-generation],
 Model Name: DeepESP/gpt2-spanish, Tasks: [text-generation]]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Flair has a series of extra models available for use that are not available through HuggingFace such as <code>sentiment</code>, <code>communicative-functions</code>, and more. <a href="/adaptnlpmodel_hub.html#FLAIR_MODELS"><code>FLAIR_MODELS</code></a> is a convience holder for quick lookup of these models (as no such list is easily available currently). When shown as results on the API they will be given the same <code>flair</code> prefix for convience.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="FlairModelResult" class="doc_header"><code>class</code> <code>FlairModelResult</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L379" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>FlairModelResult</code>(<strong><code>model_info</code></strong>:<code>ModelInfo</code>) :: <a href="/adaptnlpmodel_hub.html#HFModelResult"><code>HFModelResult</code></a></p>
</blockquote>
<p>A version of <a href="/adaptnlpmodel_hub.html#HFModelResult"><code>HFModelResult</code></a> for Flair specifically.</p>
<p>Includes which backend the model was found (such as on HuggingFace or Flair's private model list)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="FlairModelHub" class="doc_header"><code>class</code> <code>FlairModelHub</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L401" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>FlairModelHub</code>(<strong><code>username</code></strong>=<em><code>None</code></em>, <strong><code>password</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>A class for interacting with the HF model hub API, and searching for Flair models by name or task</p>
<p>Can optionally include your HuggingFace login for authorized access (but is not required)</p>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="n">hub</span> <span class="o">=</span> <span class="n">FlairModelHub</span><span class="p">()</span>
<span class="c1">#hide</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;ner&#39;</span><span class="p">)</span>
<span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;Flair&#39;s Private Model Hub&quot;</span><span class="p">]</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">models</span><span class="p">),</span> <span class="mi">15</span><span class="p">)</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/04_embeddings.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#export</span>
<span class="n">_flair_hub</span> <span class="o">=</span> <span class="n">FlairModelHub</span><span class="p">()</span>
<span class="n">_hf_hub</span> <span class="o">=</span> <span class="n">HFModelHub</span><span class="p">()</span>
</pre></div>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">FlairModelHub</span><span class="p">()</span>
<span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;sentiment&#39;</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/adaptnlpmodel_hub.html#FlairModelHub"><code>FlairModelHub</code></a> is extremely similar to <a href="/adaptnlpmodel_hub.html#HFModelHub"><code>HFModelHub</code></a>, with the two differences being that it will <strong>only</strong> return <code>Flair</code> models, and it has access to the <em>other</em> Flair models available that can't be accessed through the HuggingFace model hub</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">FlairModelHub</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="FlairModelHub.search_model_by_name" class="doc_header"><code>FlairModelHub.search_model_by_name</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L428" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>FlairModelHub.search_model_by_name</code>(<strong><code>name</code></strong>:<code>str</code>, <strong><code>as_dict</code></strong>=<em><code>False</code></em>, <strong><code>user_uploaded</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Searches HuggingFace Model API for all flair models containing <code>name</code> and returns a list of <code>HFModelResults</code></p>
<p>Optionally can return all models as <code>dict</code> rather than a list</p>
<p>If <code>user_uploaded</code> is False, will only return models originating from Flair (such as flair/chunk-english-fast)</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">FlairModelHubSearch</span><span class="p">()</span>
  <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;flair/chunk-english-fast&#39;</span><span class="p">)</span>
</pre></div>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">FlairModelHub</span><span class="p">()</span>
<span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;sentiment&#39;</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>seach_model_by_name</code> will also let you search for models without needing the <code>flair</code> prefix, such as:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_name</span><span class="p">(</span><span class="s1">&#39;sentiment&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[Model Name: flair/sentiment, Tasks: [text-classification], Source: Flair&#39;s Private Model Hub,
 Model Name: flair/en-sentiment, Tasks: [text-classification], Source: Flair&#39;s Private Model Hub,
 Model Name: flair/sentiment-fast, Tasks: [text-classification], Source: Flair&#39;s Private Model Hub]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="FlairModelHub.search_model_by_task" class="doc_header"><code>FlairModelHub.search_model_by_task</code><a href="https://github.com/novetta/adaptnlp/tree/master/adaptnlp/model_hub.py#L445" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>FlairModelHub.search_model_by_task</code>(<strong><code>task</code></strong>:<code>str</code>, <strong><code>as_dict</code></strong>=<em><code>False</code></em>, <strong><code>user_uploaded</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Searches HuggingFace Model API for all flair models for <code>task</code> and returns a list of <code>HFModelResults</code></p>
<p>Optionally can return all models as <code>dict</code> rather than a list</p>
<p>If <code>user_uploaded</code> is False, will only return models originating from Flair (such as flair/chunk-english-fast)</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><span class="n">hub</span> <span class="o">=</span> <span class="n">FlairModelHubSearch</span><span class="p">()</span>
    <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;ner&#39;</span><span class="p">)</span>
    <span class="c1"># OR: #</span>
    <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="n">FLAIR_TASKS</span><span class="o">.</span><span class="n">NAMED_ENTITY_RECOGNITION</span><span class="p">)</span>
</pre></div>
<p><strong>Usage Examples:</strong></p>
<p><b><a href=https://nbviewer.jupyter.org/github/novetta/adaptnlp/tree/master/nbs/02_model_hub.ipynb>Source</a></b></p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="n">hub</span> <span class="o">=</span> <span class="n">FlairModelHub</span><span class="p">()</span>
<span class="c1">#hide</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">search_model_by_task</span><span class="p">(</span><span class="s1">&#39;ner&#39;</span><span class="p">)</span>
<span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;Flair&#39;s Private Model Hub&quot;</span><span class="p">]</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">models</span><span class="p">),</span> <span class="mi">15</span><span class="p">)</span>
</pre></div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Since we have a <code>FLAIR_TASKS</code> object declared earlier, we can utilize it when searching for models by a task. Similar to <code>search_model_by_name</code> you should not include <code>flair/</code> in your search results, and instead search through the task key such as <code>ner</code> or <code>FLAIR_TASKS.NAMED_ENTITY_RECOGNITION</code></p>

</div>
</div>
</div>
</div>
 

