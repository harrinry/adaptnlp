# Release Weekly Insider Builds to Docker and Releases
name: Test, Build, and Release AdaptNLP DockerHub Images

on: 
  schedule:
#     - cron: '0 18 * * 5'
    - cron: '20 15 * * *'
  workflow_dispatch: # Allow manual trigger
#   release:
#     types: [published]
    
jobs:
  test:
#     if: ${{ github.event_name == 'schedule' }}
    runs-on: ubuntu-latest
    # We only verify ubuntu before push
    steps:
    - uses: actions/checkout@v2
    - name: Echo event name
      run: |
        echo ${{ github.event_name }}
#     - name: Setup Python Environment
#       uses: actions/setup-python@v2
#       with:
#         python-version: 3.8
#         architecture: 'x64'
        
#     - name: Install the library
#       run: |
#         pip install nbdev jupyter
#         pip install -e .[dev]
        
#     - name: Read all notebooks, verify they are clean, and no diff nbs
#       run: |
#         nbdev_read_nbs
#         echo "Check we are starting with clean git checkout"
#         if [ -n "$(git status -uno -s)" ]; then echo "git status is not clean"; false; fi
#         echo "Trying to strip out notebooks"
#         nbdev_clean_nbs
#         echo "Check that strip out was unnecessary"
#         git status -s # display the status to see which nbs need cleaning up
#         if [ -n "$(git status -uno -s)" ]; then echo -e "!!! Detected unstripped out notebooks\n!!!Remember to run nbdev_install_git_hooks"; false; fi
#         if [ -n "$(nbdev_diff_nbs)" ]; then echo -e "!!! Detected difference between the notebooks and the library"; false; fi
        
#     - name: Run tests
#       run: |
#         nbdev_test_nbs
#     - name: Check if
    
